{% extends 'maneu/base.html' %}
{% load static %}
{% block css %}
    <link rel="stylesheet" type="text/css" href="{% static '/css/maneu_guess/insert.css' %}"/>
{% endblock %}
{% block content %}
    <div class="container" style="margin-top: 5%;">
        <div class="col-5">
            <form method="get" action="{% url 'maneu_guest:index' %}">
                <div class="input-group input-group-sm">
                    <input type="submit" class="btn btn-warning" value="返回列表">
                </div>
            </form>
        </div>
        <hr>
        <div class="col-5" style="padding-bottom: 10px">
            <h5>客户个人信息</h5>
        </div>
        <form id="guess_form">
            <div class="col-3" style="padding-bottom: 5px">
                <div class="input-group input-group-sm">
                    <span class="input-group-text col-4">时间</span>
                    <input class="form-control" id="time" name="time" type="datetime-local" autocomplete="off"
                           value="{{ today|safe }}">
                </div>
            </div>
            <div class="col-3" style="padding-bottom: 5px">
                <div class="input-group input-group-sm">
                    <span class="input-group-text col-4">电话</span>
                    <input class="form-control" id="guess_phone" name="phone" type="text" autocomplete="off"
                           required="required">
                </div>
            </div>
            <div class="col-3" style="padding-bottom: 5px">
                <div class="input-group input-group-sm">
                    <span class="input-group-text col-4">姓名</span>
                    <input id="order" name="order" type="hidden" autocomplete="off">
                    <input class="form-control" id="guess_name" name="name" type="text" autocomplete="off" required>
                </div>
            </div>
            <div class="col-12" style="padding-bottom: 5px">
                <div class="input-group input-group-sm">
                    <span class="input-group-text col-1">性别</span>
                    <input autocomplete="off" type="text" name="sex" class="form-control" list="sex">
                    <span class="input-group-text col-1">年龄</span>
                    <input autocomplete="off" list="age" type="text" name="age" class="form-control">
                    <span class="input-group-text col-1">眼位</span>
                    <input autocomplete="off" type="text" name="OT" list="OT" class="form-control">
                    <span class="input-group-text col-1">主视眼</span>
                    <input autocomplete="off" type="text" name="EM" list="EM" class="form-control">
                    <span class="input-group-text col-1">病族史</span>
                    <input autocomplete="off" type="text" name="DFH" list="DFH" class="form-control">
                </div>
            </div>
            <div class="col-12" style="padding-bottom: 5px">
                <div class="input-group input-group-sm">
                    <span class="input-group-text col-1">备注</span>
                    <input autocomplete="off" type="text" name="remark" id="remark" class="form-control">
                </div>
            </div>
        </form>
        <hr>
        <form id="subjective_form">
            <div class="col-12">
                <div class="col-5" style="padding-bottom: 10px">
                    <h5>屈光检验报告</h5>
                </div>
            </div>
            <div class="col-12" style="padding-bottom: 5px">
                <div class="input-group input-group-sm">
                    <span class="input-group-text col-1">右眼OD</span>
                    <input autocomplete="off" type="text" name="OD_VA" list="VA" class="form-control"
                           placeholder="裸眼视力VA">
                    <input autocomplete="off" type="text" name="OD_SPH" list="SPH" class="form-control"
                           placeholder="球镜SPH">
                    <input autocomplete="off" type="text" name="OD_CYL" list="CYL" class="form-control"
                           placeholder="柱镜CYL">
                    <input autocomplete="off" type="text" name="OD_AX" list="AX" class="form-control"
                           placeholder="轴位AX">
                    <input autocomplete="off" type="text" name="OD_ADD" list="ADD" class="form-control"
                           placeholder="下加光ADD">
                    <input autocomplete="off" type="text" name="OD_BCVA" list="VA" class="form-control"
                           placeholder="矫正视力BCVA">
                    <input autocomplete="off" type="text" name="OD_AL" list="AK_AL" class="form-control"
                           placeholder="眼轴长度AL">
                    <input autocomplete="off" type="text" name="OD_AK" list="AK_AL" class="form-control"
                           placeholder="角膜曲率AK">
                    <input autocomplete="off" type="text" name="OD_AD" list="AD" class="form-control"
                           placeholder="前房深度AD">
                    <input autocomplete="off" type="text" name="OD_CCT" list="CCT" class="form-control"
                           placeholder="角膜厚度CCT">
                    <input autocomplete="off" type="text" name="OD_LT" list="LT" class="form-control"
                           placeholder="晶体厚度LT">
                    <input autocomplete="off" type="text" name="OD_VT" list="VT" class="form-control"
                           placeholder="玻璃体厚度VT">
                </div>
            </div>
            <div class="col-12" style="padding-bottom: 5px">
                <div class="input-group input-group-sm">
                    <span class="input-group-text col-1">左眼OS</span>
                    <input autocomplete="off" type="text" name="OS_VA" list="VA" class="form-control"
                           placeholder="裸眼视力VA">
                    <input autocomplete="off" type="text" name="OS_SPH" list="SPH" class="form-control"
                           placeholder="球镜SPH">
                    <input autocomplete="off" type="text" name="OS_CYL" list="CYL" class="form-control"
                           placeholder="柱镜CYL">
                    <input autocomplete="off" type="text" name="OS_AX" list="AX" class="form-control"
                           placeholder="轴位AX">
                    <input autocomplete="off" type="text" name="OS_ADD" list="ADD" class="form-control"
                           placeholder="下加光ADD">
                    <input autocomplete="off" type="text" name="OS_BCVA" list="VA" class="form-control"
                           placeholder="矫正视力BCVA">
                    <input autocomplete="off" type="text" name="OS_AL" list="AK_AL" class="form-control"
                           placeholder="眼轴长度AL">
                    <input autocomplete="off" type="text" name="OS_AK" list="AK_AL" class="form-control"
                           placeholder="角膜曲率AK">
                    <input autocomplete="off" type="text" name="OS_AD" list="AD" class="form-control"
                           placeholder="前房深度AD">
                    <input autocomplete="off" type="text" name="OS_CCT" list="CCT" class="form-control"
                           placeholder="角膜厚度CCT">
                    <input autocomplete="off" type="text" name="OS_LT" list="LT" class="form-control"
                           placeholder="晶体厚度LT">
                    <input autocomplete="off" type="text" name="OS_VT" list="VT" class="form-control"
                           placeholder="玻璃体厚度VT">
                </div>
            </div>
            <div class="col-12">
                <div class="input-group input-group-sm">
                    <span class="input-group-text col-1">备注</span>
                    <input autocomplete="off" type="text" name="remark" id="remark" class="form-control">
                </div>
            </div>
        </form>
        <hr>
        <div class="col-5">
            <form method="post" action="{% url 'maneu_guest:insert' %}">
                {% csrf_token %}
                <input type="hidden" id="guess" name="guess">
                <input type="hidden" id="subjective" name="subjective">
                <div class="input-group input-group-sm">
                    <input type="submit" class="btn btn-warning" id="insert" value="添加客户">
                </div>
            </form>
        </div>
    </div>
    <div>
        <datalist id="DFH">
            <option>有</option>
            <option>无</option>
        </datalist>
        <datalist id="EM">
            <option>右</option>
            <option>左</option>
        </datalist>
        <datalist id="OT">
            <option>正位眼</option>
            <option>斜视</option>
        </datalist>
        <datalist id="age">
            <option> 1</option>
            <option> 2</option>
            <option> 3</option>
            <option> 4</option>
            <option> 5</option>
            <option> 6</option>
            <option> 7</option>
            <option> 8</option>
            <option> 9</option>
            <option> 10</option>
            <option> 11</option>
            <option> 12</option>
            <option> 13</option>
            <option> 14</option>
            <option> 15</option>
            <option> 16</option>
            <option> 17</option>
            <option> 18</option>
            <option> 19</option>
            <option> 20</option>
            <option> 21</option>
            <option> 22</option>
            <option> 23</option>
            <option> 24</option>
            <option> 25</option>
            <option> 26</option>
            <option> 27</option>
            <option> 28</option>
            <option> 29</option>
            <option> 30</option>
            <option> 31</option>
            <option> 32</option>
            <option> 33</option>
            <option> 34</option>
            <option> 35</option>
            <option> 36</option>
            <option> 37</option>
            <option> 38</option>
            <option> 39</option>
            <option> 40</option>
            <option> 41</option>
            <option> 42</option>
            <option> 43</option>
            <option> 44</option>
            <option> 45</option>
            <option> 46</option>
            <option> 47</option>
            <option> 48</option>
            <option> 49</option>
            <option> 50</option>
            <option> 51</option>
            <option> 52</option>
            <option> 53</option>
            <option> 54</option>
            <option> 55</option>
            <option> 56</option>
            <option> 57</option>
            <option> 58</option>
            <option> 59</option>
            <option> 60</option>
            <option> 61</option>
            <option> 62</option>
            <option> 63</option>
            <option> 64</option>
            <option> 65</option>
            <option> 66</option>
            <option> 67</option>
            <option> 68</option>
            <option> 69</option>
            <option> 70</option>
            <option> 71</option>
            <option> 72</option>
            <option> 73</option>
            <option> 74</option>
            <option> 75</option>
            <option> 76</option>
            <option> 77</option>
            <option> 78</option>
            <option> 79</option>
            <option> 80</option>
            <option> 81</option>
            <option> 82</option>
            <option> 83</option>
            <option> 84</option>
            <option> 85</option>
            <option> 86</option>
            <option> 87</option>
            <option> 88</option>
            <option> 89</option>
            <option> 90</option>
            <option> 91</option>
            <option> 92</option>
            <option> 93</option>
            <option> 94</option>
            <option> 95</option>
            <option> 96</option>
            <option> 97</option>
            <option> 98</option>
        </datalist>
        <datalist id="sex">
            <option>男</option>
            <option>女</option>
        </datalist>
        <datalist id="VA">
            <option>1.5</option>
            <option>1.4</option>
            <option>1.3</option>
            <option>1.2</option>
            <option>1.1</option>
            <option>1.0</option>
            <option>2.9</option>
            <option>2.8</option>
            <option>2.7</option>
            <option>2.6</option>
            <option>2.5</option>
            <option>2.4</option>
            <option>2.3</option>
            <option>2.2</option>
            <option>2.1</option>
        </datalist>
        <datalist id="SPH">
            <option>-0.00</option>
            <option>-0.25</option>
            <option>-0.50</option>
            <option>-0.75</option>
            <option>-1.00</option>
            <option>-1.25</option>
            <option>-1.50</option>
            <option>-1.75</option>
            <option>-2.00</option>
            <option>-2.25</option>
            <option>-2.50</option>
            <option>-2.75</option>
            <option>-3.00</option>
            <option>-3.25</option>
            <option>-3.50</option>
            <option>-3.75</option>
            <option>-4.00</option>
            <option>-4.25</option>
            <option>-4.50</option>
            <option>-4.75</option>
            <option>-5.00</option>
            <option>-5.25</option>
            <option>-5.50</option>
            <option>-5.75</option>
            <option>-6.00</option>
            <option>-6.25</option>
            <option>-6.50</option>
            <option>-6.75</option>
            <option>-7.00</option>
            <option>-7.25</option>
            <option>-7.50</option>
            <option>-7.75</option>
            <option>-8.00</option>
            <option>-8.25</option>
            <option>-8.50</option>
            <option>-8.75</option>
            <option>-9.00</option>
            <option>-9.25</option>
            <option>-9.50</option>
            <option>-9.75</option>
            <option>-10.00</option>
        </datalist>
        <datalist id="CYL">
            <option>-0.00</option>
            <option>-0.25</option>
            <option>-0.50</option>
            <option>-0.75</option>
            <option>-1.00</option>
            <option>-1.25</option>
            <option>-1.50</option>
            <option>-1.75</option>
            <option>-2.00</option>
            <option>-2.25</option>
            <option>-2.50</option>
            <option>-2.75</option>
            <option>-3.00</option>
            <option>-3.25</option>
            <option>-3.50</option>
            <option>-3.75</option>
            <option>-4.00</option>
            <option>-4.25</option>
            <option>-4.50</option>
            <option>-4.75</option>
            <option>-5.00</option>
            <option>-5.25</option>
            <option>-5.50</option>
            <option>-5.75</option>
            <option>-6.00</option>
        </datalist>
        <datalist id="AX">
            <option>2</option>
            <option>1</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5</option>
            <option>6</option>
            <option>7</option>
            <option>8</option>
            <option>9</option>
            <option>10</option>
            <option>11</option>
            <option>12</option>
            <option>13</option>
            <option>14</option>
            <option>15</option>
            <option>16</option>
            <option>17</option>
            <option>18</option>
            <option>19</option>
            <option>20</option>
            <option>21</option>
            <option>22</option>
            <option>23</option>
            <option>24</option>
            <option>25</option>
            <option>26</option>
            <option>27</option>
            <option>28</option>
            <option>29</option>
            <option>30</option>
            <option>31</option>
            <option>32</option>
            <option>33</option>
            <option>34</option>
            <option>35</option>
            <option>36</option>
            <option>37</option>
            <option>38</option>
            <option>39</option>
            <option>40</option>
            <option>41</option>
            <option>42</option>
            <option>43</option>
            <option>44</option>
            <option>45</option>
            <option>46</option>
            <option>47</option>
            <option>48</option>
            <option>49</option>
            <option>50</option>
            <option>51</option>
            <option>52</option>
            <option>53</option>
            <option>54</option>
            <option>55</option>
            <option>56</option>
            <option>57</option>
            <option>58</option>
            <option>59</option>
            <option>60</option>
            <option>61</option>
            <option>62</option>
            <option>63</option>
            <option>64</option>
            <option>65</option>
            <option>66</option>
            <option>67</option>
            <option>68</option>
            <option>69</option>
            <option>70</option>
            <option>71</option>
            <option>72</option>
            <option>73</option>
            <option>74</option>
            <option>75</option>
            <option>76</option>
            <option>77</option>
            <option>78</option>
            <option>79</option>
            <option>80</option>
            <option>81</option>
            <option>82</option>
            <option>83</option>
            <option>84</option>
            <option>85</option>
            <option>86</option>
            <option>87</option>
            <option>88</option>
            <option>89</option>
            <option>90</option>
            <option>91</option>
            <option>92</option>
            <option>93</option>
            <option>94</option>
            <option>95</option>
            <option>96</option>
            <option>97</option>
            <option>98</option>
            <option>99</option>
            <option>100</option>
            <option>101</option>
            <option>102</option>
            <option>103</option>
            <option>104</option>
            <option>105</option>
            <option>106</option>
            <option>107</option>
            <option>108</option>
            <option>109</option>
            <option>110</option>
            <option>111</option>
            <option>112</option>
            <option>113</option>
            <option>114</option>
            <option>115</option>
            <option>116</option>
            <option>117</option>
            <option>118</option>
            <option>119</option>
            <option>120</option>
            <option>121</option>
            <option>122</option>
            <option>123</option>
            <option>124</option>
            <option>125</option>
            <option>126</option>
            <option>127</option>
            <option>128</option>
            <option>129</option>
            <option>130</option>
            <option>131</option>
            <option>132</option>
            <option>133</option>
            <option>134</option>
            <option>135</option>
            <option>136</option>
            <option>137</option>
            <option>138</option>
            <option>139</option>
            <option>140</option>
            <option>141</option>
            <option>142</option>
            <option>143</option>
            <option>144</option>
            <option>145</option>
            <option>146</option>
            <option>147</option>
            <option>148</option>
            <option>149</option>
            <option>150</option>
            <option>151</option>
            <option>152</option>
            <option>153</option>
            <option>154</option>
            <option>155</option>
            <option>156</option>
            <option>157</option>
            <option>158</option>
            <option>159</option>
            <option>160</option>
            <option>161</option>
            <option>162</option>
            <option>163</option>
            <option>164</option>
            <option>165</option>
            <option>166</option>
            <option>167</option>
            <option>168</option>
            <option>169</option>
            <option>170</option>
            <option>171</option>
            <option>172</option>
            <option>173</option>
            <option>174</option>
            <option>175</option>
            <option>176</option>
            <option>177</option>
            <option>178</option>
            <option>179</option>
            <option>180</option>
        </datalist>
        <datalist id="AK_AL">
            <option>10</option>
            <option>11</option>
            <option>12</option>
            <option>13</option>
            <option>14</option>
            <option>15</option>
            <option>16</option>
            <option>17</option>
            <option>18</option>
            <option>19</option>
            <option>20</option>
            <option>21</option>
            <option>22</option>
            <option>23</option>
            <option>24</option>
            <option>25</option>
            <option>26</option>
            <option>27</option>
            <option>28</option>
            <option>29</option>
            <option>30</option>
            <option>31</option>
            <option>32</option>
            <option>33</option>
            <option>34</option>
            <option>35</option>
            <option>36</option>
            <option>37</option>
            <option>38</option>
            <option>39</option>
            <option>40</option>
            <option>41</option>
            <option>42</option>
            <option>43</option>
            <option>44</option>
            <option>45</option>
            <option>46</option>
            <option>47</option>
            <option>48</option>
            <option>49</option>
            <option>50</option>
            <option>51</option>
            <option>52</option>
            <option>53</option>
            <option>54</option>
            <option>55</option>
        </datalist>
    </div>
{% endblock %}
{% block javascript %}
    <script>
        $.fn.serializeJsonStr = function () {
            var o = {};
            var a = this.serializeArray();
            $.each(a, function () {
                if (o[this.name] !== undefined) {
                    if (!o[this.name].push) {
                        o[this.name] = [o[this.name]];
                    }
                    o[this.name].push(this.value || '');
                } else {
                    o[this.name] = this.value || '';
                }
            });
            return JSON.stringify(o);
        }
        $(document).ready(function () {
            $("#insert").click(function () {
                guess_form = $('#guess_form').serializeJsonStr();
                subjective_form = $('#subjective_form').serializeJsonStr();
                $("#guess").val(guess_form);
                $("#subjective").val(subjective_form);
            })
        })
    </script>
{% endblock %}
