{% extends 'maneu/base_admin.html' %}
{% load static %}
{% block content %}
    <div class="container" style="margin-top: 3%; margin-bottom: 5%">
        <div class="col-1">
            <form action="{% url 'maneu_order_v2:detail' %}" method="post" class="vertical2">
                {% csrf_token %}
                <input type="hidden" name="order_id" value="{{ order.id }}">
                <div class="input-group input-group-sm mb-2">
                    <input type="submit" class="btn btn-primary" value="返回列表">
                </div>
            </form>
        </div>
        <hr style="color: white">
        <h4>订单基本信息</h4>
        <form class="vertical2" id="order">
            <div class="col-12 row">
                <div class="col-md-3 col-xs-12">
                    <div class="input-group input-group-sm mb-2">
                        <span class="input-group-text col-3">时间</span>
                        <input class="form-control" id="time" name="time" type="date" autocomplete="off" value="{{ order.time|safe }}">
                    </div>
                </div>
                <div class="col-md-3 col-xs-12">
                    <div class="input-group input-group-sm mb-2">
                        <span class="input-group-text col-3">姓名</span>
                        <input class="form-control" id="name" name="name" type="text" autocomplete="off" value="{{ order.name }}">
                    </div>
                </div>
                <div class="col-md-3 col-xs-12">
                    <div class="input-group input-group-sm mb-2">
                        <span class="input-group-text col-3">电话</span>
                        <input class="form-control" id="phone" name="phone" type="text" autocomplete="off" value="{{ order.phone }}">
                    </div>
                </div>
            </div>
        </form>
        <hr style="color: white">
        <form class="vertical2 Vision_Solutions" id="Vision_Solutions">
            <div class="col-12 row">
                <div class="col-9">
                    <div class="input-group input-group-sm mb-2">
                        <span class="input-group-text col-1">右眼OD</span>
                        <input autocomplete="off" type="text" class="form-control" name="OD_VA" list="OD_VA" placeholder="裸眼视力" value="">
                        <input autocomplete="off" type="text" class="form-control" name="OD_SPH" list="OD_SPH" placeholder="球镜" value="">
                        <input autocomplete="off" type="text" class="form-control" name="OD_CYL" list="OD_CYL" placeholder="柱镜" value="">
                        <input autocomplete="off" type="text" class="form-control" name="OD_AX" list="OD_AX" placeholder="轴位" value="">
                        <input autocomplete="off" type="text" class="form-control" name="OD_PR" list="OD_PR" placeholder="凌镜" value="">
                        <input autocomplete="off" type="text" class="form-control" name="OD_FR" list="OD_FR" placeholder="基地取向" value="">
                        <input autocomplete="off" type="text" class="form-control" name="OD_ADD" list="OD_ADD" placeholder="下加光" value="">
                        <input autocomplete="off" type="text" class="form-control" name="OD_BCVA" list="OD_BCVA" placeholder="纠正视力" value="">
                    </div>
                </div>
                <div class="col-9">
                    <div class="input-group input-group-sm mb-2">
                        <span class="input-group-text col-1">左眼OS</span>
                        <input autocomplete="off" type="text" class="form-control" name="OS_VA" list="OS_VA" placeholder="裸眼视力" value="">
                        <input autocomplete="off" type="text" class="form-control" name="OS_SPH" list="OS_SPH" placeholder="球镜" value="">
                        <input autocomplete="off" type="text" class="form-control" name="OS_CYL" list="OS_CYL" placeholder="柱镜" value="">
                        <input autocomplete="off" type="text" class="form-control" name="OS_AX" list="OS_AX" placeholder="轴位" value="">
                        <input autocomplete="off" type="text" class="form-control" name="OS_PR" list="OS_PR" placeholder="凌镜" value="">
                        <input autocomplete="off" type="text" class="form-control" name="OS_FR" list="OS_FR" placeholder="基地取向" value="">
                        <input autocomplete="off" type="text" class="form-control" name="OS_ADD" list="OS_ADD" placeholder="下加光" value="">
                        <input autocomplete="off" type="text" class="form-control" name="OS_BCVA" list="OS_BCVA" placeholder="纠正视力" value="">
                    </div>
                </div>
                <div class="col-9">
                    <div class="input-group input-group-sm mb-2">
                        <span class="input-group-text col-md-1">瞳距</span>
                        <input autocomplete="off" type="text" class="form-control" name="PD" list="pd">
                    </div>
                </div>
                <div class="col-9">
                    <div class="input-group input-group-sm mb-2">
                        <span class="input-group-text col-md-1">方案类型</span>
                        <input autocomplete="off" type="text" class="form-control col-4" name="function" list="function">
                    </div>
                </div>
                <div class="col-9">
                    <div class="input-group input-group-sm mb-2">
                        <span class="input-group-text col-1">配镜师建议</span>
                        <input autocomplete="off" type="text" class="form-control" name="remark" id="remark">
                    </div>
                </div>
            </div>
        </form>
        <hr style="color: white">
        <div class="col-md-12 row">
            <div class="col-md-7">
                <h4>产品信息</h4>
            </div>
            <div class="col-md-1">
                <div class="input-group input-group-sm mb-2">
                    <button type="button" class="btn btn-warning col-md-12" id="DeleteTextBox">删除</button>
                </div>
            </div>
            <div class="col-md-1">
                <div class="input-group input-group-sm mb-2">
                    <button type="button" class="btn btn-primary col-md-12" id="AddMoreTextBox">添加</button>
                </div>
            </div>
        </div>
        <div class="col-md-12">
            <form class="vertical2" id="Product_Orders">
                <div class="col-md-9 row" id="Product_Orders_TABLE">
                </div>
            </form>
        </div>
        <hr style="color: white">
        <div class="col-md-12 row">
            <div class="col-1">
                <div class="input-group input-group-sm mb-2">
                    <form class="vertical2" id="order_insert" method="post" action="{% url 'maneu_order_v2:update' %}">
                        {% csrf_token %}
                        <input type="hidden" name="order_id" value="{{ order.id }}">
                        <input type="hidden" name="store_id" value="{{ store.id }}">
                        <input type="hidden" name="vision_id" value="{{ vision.id }}">
                        <input type="hidden" name="order_json" id="order_json">
                        <input type="hidden" name="Vision_Solutions" id="Vision_Solutions_json">
                        <input type="hidden" name="Product_Orders" id="Product_Orders_json">
                        <div class="input-group input-group-sm mb-2">
                            <input autocomplete="off" class="btn btn-danger" id="insert" type="submit" value="提交订单">
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
{% block javascript %}
    <script type="application/javascript">
        store = {{ store.content|safe }};
        vision = {{ vision.content|safe }};
        StoreCount= Object.keys(store).length /5;
        InputCount= StoreCount+1;
    </script>
    <script type="application/javascript" src="{% static 'javascript/maneu/serialize_moudels.js' %}"></script>
    <script type="application/javascript" src="{% static 'javascript/maneu_order/order_update.js' %}"></script>
{% endblock %}